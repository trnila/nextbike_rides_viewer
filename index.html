 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
                           integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
                              crossorigin=""/>

  <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
             integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
                crossorigin=""></script>

                <script src="http://ewoken.github.io/Leaflet.MovingMarker/MovingMarker.js"></script>

   <div id="map" style="width: 100vw; height: 100vh;"></div>

   <script>
var map = L.map('map').setView([49.820923, 18.262524], 13);
     L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: 'Â© OpenStreetMap'
          }).addTo(map);


          async function x() {
            const res = await fetch('stations.csv');
            const text = await res.text();
            text.split('\n').forEach(line => {
               const [name, lat, lng] = line.split(', ');
               if(!lng) return;
               var marker = L.marker([lat, lng]).addTo(map);
               marker.bindPopup(name);
            });
          }

          async function y() {
            const res = await fetch('events.csv');
            const text = await res.text();

            const x = text.split('\n').map(line => {
               if(!line.length) return;
               const [id, tsSrc, src, tsDst, dst, srcLat, srcLng, dstLat, dstLng] = line.split(', ');

               return {
                  id, tsSrc, src, tsDst, dst, srcLat, srcLng, dstLat, dstLng
               }
               
               //var myMovingMarker = L.Marker.movingMarker([[srcLat, srcLng],[dstLat, dstLng]], [20000]).addTo(map);
               //myMovingMarker.start();

               //var polyline = L.polyline([[srcLat, srcLng],[dstLat, dstLng]], {color: 'red'}).addTo(map);
            });

            console.log(x);
          }

          //x();
          y();

   </script>
   
